<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>타이핑 효과</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }
      html,
      body {
        width: 100%;
        height: 100%;
        margin: 0;
      }

      #main {
        background-color: black;
        height: 100%;
        color: #fff;
        font-size: 50px;
        text-align: center;
        display: flex;
        flex-direction: column;
        justify-content: center;
        gap: 20px;
      }

      .swiper {
        width: 100%;
        height: 100%;
      }

      .swiper-slide {
        text-align: center;
        font-size: 18px;
        background: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      .swiper-slide:first-child {
        /* background: #000; */
      }
      .swiper-slide img {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      #textType,
      #textType2,
      #textOverlay,
      #groveLogo {
        transition: opacity 1.5s ease;
      }
    </style>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/typewriter-effect@2.18.0/dist/core.js"></script>
  </head>
  <body>
    <div class="swiper mySwiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          <section id="main">
            <div id="textType"></div>
            <div id="textType2"></div>
            <div id="textOverlay" style="opacity: 0; font-size: 32px">
              그로브에 물들다
            </div>
            <div
              id="groveLogo"
              style="opacity: 0; font-size: 60px; font-weight: bold"
            >
              GROVE
            </div>
          </section>
        </div>
        <div class="swiper-slide">
          <video autoplay muted loop>
            <source
              src="https://www.tonework.com/upload/2023-05-15/T7krxiB6OHKIbZGkBtLe.mp4"
              type="video/mp4"
            />
          </video>
        </div>
        <div class="swiper-slide">
          <img
            src="https://www.grovesoft.net/wp-content/uploads/2024/07/slide_home_koreaboard.png"
            alt=""
          />
        </div>
        <div class="swiper-slide">
          <img
            src="https://www.grovesoft.net/wp-content/uploads/2024/07/slide_home_taejae.png"
            alt=""
          />
        </div>
      </div>
      <div class="swiper-button-next"></div>
      <div class="swiper-button-prev"></div>
      <div class="swiper-pagination"></div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <!-- Initialize Swiper -->
    <script>
      let swiper; // 전역에 선언

      function startTyping() {
        const text0 = document.getElementById("textType");
        const text1 = document.getElementById("textType2");
        const overlay = document.getElementById("textOverlay");
        const grove = document.getElementById("groveLogo");
        const mainSection = document.getElementById("main");

        // 초기화
        text0.textContent = "";
        text1.textContent = "";
        overlay.style.opacity = 0;
        grove.style.opacity = 0;
        text0.style.opacity = 1;
        text1.style.opacity = 1;
        mainSection.style.backgroundImage = "none";

        const typewriter0 = new Typewriter(text0, {
          loop: false,
        });

        typewriter0
          .typeString("불가능")
          .pauseFor(1000)
          .deleteAll()
          .callFunction(() => {
            const typewriter1 = new Typewriter(text0, {
              loop: false,
              cursor: "",
            });
            typewriter1
              .typeString("경계를 넘어,")
              .pauseFor(300)
              .callFunction(() => {
                const typewriter2 = new Typewriter(text1, {
                  loop: false,
                  cursor: "",
                });
                typewriter2
                  .typeString("새로운 가능성을 열다")
                  .callFunction(() => {
                    setTimeout(() => {
                      mainSection.style.backgroundImage =
                        "url('https://www.grovesoft.net/wp-content/uploads/2024/12/forest_img.png')";
                      mainSection.style.backgroundSize = "cover";
                      mainSection.style.backgroundPosition = "center";

                      text0.style.opacity = 0;
                      text1.style.opacity = 0;

                      setTimeout(() => {
                        overlay.style.opacity = 1;
                      }, 500);

                      setTimeout(() => {
                        overlay.style.opacity = 0;
                      }, 2000);

                      setTimeout(() => {
                        grove.style.opacity = 1;
                      }, 3500);
                    }, 1500);
                  })
                  .start();
              })
              .start();
          })
          .start();
      }

      window.onload = function () {
        swiper = new Swiper(".mySwiper", {
          effect: "fade",
          speed: 1000,
          autoplay: {
            delay: 15000,
            disableOnInteraction: false,
          },
          pagination: {
            el: ".swiper-pagination",
            clickable: true,
          },
          navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
          },
          on: {
            slideChange: function () {
              if (swiper.realIndex === 0) {
                startTyping();
              }
            },
          },
        });

        // 초기 진입 시 타이핑 실행
        if (swiper.realIndex === 0) {
          startTyping();
        }
      };
    </script>
  </body>
</html>
